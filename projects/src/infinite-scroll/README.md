# infinite-scroll

## 流程
1. 计算元素高度（每个元素高度固定，方便计算）
2. 计算可视区域可展示元素数量
3. 每次拉回来数据都遍历一遍，设置索引和偏移量，将元素用绝对定位脱离文档流，再用 translate 去偏移到对应的位置
4. 设置锚点元素，该锚点元素为可视区域第一个元素的上一个元素，其作用是记录上一次偏移量和索引
5. 监听滚动，当 scrolltop - 上次滚动到的位置大于0，则向下滑动，否则向上滑动。然后更新锚点元素偏移量，查看当前滚动偏移量是否超过一个元素高度，超过则更新可视区域头尾指针，并更新可视区域列表元素。


## 优化
1. 设置缓冲区，当小量移动时可以直接展示缓冲的元素而非这个列表重新渲染
2. 滚动事件频繁调用会导致多次浏览器回流，在保证流畅性下在 requestAnimationFrame 回调里设置一个 loading 态，减少事件的调用
3. 设置 placeholder 占位元素去避免快速滑动时出现空元素的情况。